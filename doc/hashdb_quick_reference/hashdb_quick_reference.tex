% pdflatex ch15.tex

\documentclass[12pt]{article}
%\usepackage[margin=0.8in]{geometry}
\usepackage[top=1.0in, bottom=0.6in, left=0.6in, right=1.0in]{geometry}
\usepackage{paralist} % for compactitem, compactdesc, compactenum
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{verbatim} % for commenting out section
\usepackage{algorithmic}
\usepackage{tikz}
\usepackage{xspace}
\usepackage{hyperref}
\usepackage{url}

\setlength{\parindent}{0pt}

\newcommand{\hdb}{\emph{hashdb}\xspace}
\newcommand{\bulk}{\emph{bulk\_extractor}\xspace}
\newcommand{\mdd}{\emph{md5deep}\xspace}
\newcommand{\bev}{\emph{Bulk Extractor Viewer}\xspace}

\pagestyle{empty}

\begin{document}

\begin{center}
\textbf{\Large \hdb Quick Reference} \\
\url{http://github.com/simsong/hashdb/wiki}
\end{center}

\textbf{New Database} \\
\begin{tabular}{p{3.6 in} p{4 in}}
\hangindent=2em \small\texttt{create [-p<hash block size>] [-m<maximum duplicates>] [<bloom settings>] <hashdb.hdb>} &
Create a new hash database \\
\end{tabular}
\\
\\
\textbf{Import/Export} \\
\begin{tabular}{p{3.6 in} p{4 in}}
\hangindent=2em\small\texttt{import [-r <repository name>] <dfxml.xml> <hashdb.hdb>} &
Import from DFXML file into hash database \\
\small\texttt{export <hashdb.hdb> <dfxml.xml>} &
Export hash database to DFXML file \\
\end{tabular}
\\
\\
\textbf{Database Manipulation} \\
\begin{tabular}{p{3.6 in} p{4 in}}
\small\texttt{add <A.hdb> <B.hdb>} & $A \cup B \rightarrow B$ for all A \\
\hangindent=2em\small\texttt{add\_repository <A.hdb> <B.hdb> <repository name>} & $A \cup B \rightarrow B$ where repository name matches \\
\small\texttt{add\_multiple <A.hdb> <B.hdb> <C.hdb>} & $A \cup B \rightarrow C$ for all A and B \\
\small\texttt{intersect <A.hdb> <B.hdb> <C.hdb>} & $A \cap B \rightarrow C$ for any matchcing hash\\
\small\texttt{intersect\_exact <A.hdb> <B.hdb> <C.hdb>} & $A \cap B \rightarrow C$ for exact matches\\
\small\texttt{subtract <A.hdb> <B.hdb> <C.hdb>} & $A \cap \overline B \rightarrow C$ for any matching hash \\
\small\texttt{subtract\_exact <A.hdb> <B.hdb> <C.hdb>} & $A \cap \overline B \rightarrow C$ for exact matches \\
\small\texttt{deduplicate <A.hdb> <B.hdb>} & Copy $A \rightarrow B$ except for hashes with duplicates \\
\end{tabular}
\\
\\
\textbf{Scan Services} \\
\begin{tabular}{p{3.6 in} p{4 in}}
\small\texttt{scan <hashdb.hdb> <dfxml.xml>} & Scan DFXML file for matching hashes \\
\small\texttt{scan\_hash <hashdb.hdb> <hash value>} & Scan for hash match \\
\end{tabular}
\\
\\
\textbf{Statistics}\\
\begin{tabular}{p{3.6 in} p{4 in}}
\small\small\texttt{size <hashdb.hdb>} & Print sizes of internal database tables \\
\small\texttt{sources <hashdb.hdb>} & Print all repository names and filenames \\
\small\texttt{histogram <hashdb.hdb>} & Print hash distribution \\
\small\texttt{duplicates <hashdb.hdb> <number>} & Print hashes sourced the given number of times \\
\small\texttt{hash\_table <hashdb.hdb> <file name>} & Print all hash information for file\\
\end{tabular}
\\
\\
\textbf{Tuning}\\
\begin{tabular}{p{3.6 in} p{4 in}}
\hangindent=2em\small\texttt{rebuild\_bloom [<bloom settings>] <hashdb.hdb>} & Rebuild Bloom filter \\
\end{tabular}
\\
\\
\textbf{Performance Analysis}\\
\begin{tabular}{p{3.6 in} p{4 in}}
\hangindent=2em\small\texttt{add\_random [-r <repository name>] <hashdb.hdb> <count>} & Add random hashes, log performance in \texttt{log.xml}\\
\small\texttt{scan\_random <hashdb.hdb> <copy.hdb>} & Scan random hashes, log performance in \texttt{log.xml}\\
\end{tabular}
\\
\\
\textbf{\bulk Scanner}\\
\begin{tabular}{p{6.0 in} l}
\small\texttt{bulk\_extractor -e hashdb -S hashdb\_mode=import -o outdir1 my\_image1} & Import \\
\hangindent=2em\small\texttt{bulk\_extractor -e hashdb -S hashdb\_mode=scan -S hashdb\_scan\_path= outdir1/hashdb.hdb -o outdir2 my\_image2} & Scan \\
\end{tabular}

\vspace{2mm}
\begin{center}
\begin{footnotesize}
\today
\end{footnotesize}
\end{center}

\end{document}

